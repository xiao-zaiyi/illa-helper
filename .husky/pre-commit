#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ğŸš€ Pre-commit ä»£ç è´¨é‡æ£€æŸ¥

echo "ğŸ” å¼€å§‹ pre-commit æ£€æŸ¥..."

# TypeScript ç¼–è¯‘æ£€æŸ¥ï¼ˆå…¨é¡¹ç›®ï¼‰
echo "ğŸ“ æ£€æŸ¥ TypeScript ç¼–è¯‘..."
npm run compile
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript ç¼–è¯‘å¤±è´¥ï¼Œæäº¤è¢«é˜»æ­¢"
  exit 1
fi

# å¯¹æš‚å­˜åŒºæ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–å’Œ lint æ£€æŸ¥
echo "ğŸ§¹ æ£€æŸ¥æš‚å­˜åŒºæ–‡ä»¶çš„æ ¼å¼å’Œè´¨é‡..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ ä»£ç æ ¼å¼æˆ–è´¨é‡æ£€æŸ¥å¤±è´¥ï¼Œæäº¤è¢«é˜»æ­¢"
  exit 1
fi
